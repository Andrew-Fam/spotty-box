angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.transition","ui.bootstrap.modal"]),angular.module("ui.bootstrap.tpls",["template/modal/backdrop.html","template/modal/window.html"]),angular.module("ui.bootstrap.transition",[]).factory("$transition",["$q","$timeout","$rootScope",function(n,e,t){function o(n){for(var e in n)if(void 0!==i.style[e])return n[e]}var a=function(o,i,r){r=r||{};var l=n.defer(),d=a[r.animation?"animationEndEventName":"transitionEndEventName"],c=function(){t.$apply(function(){o.unbind(d,c),l.resolve(o)})};return d&&o.bind(d,c),e(function(){angular.isString(i)?o.addClass(i):angular.isFunction(i)?i(o):angular.isObject(i)&&o.css(i),d||l.resolve(o)}),l.promise.cancel=function(){d&&o.unbind(d,c),l.reject("Transition cancelled")},l.promise},i=document.createElement("trans"),r={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},l={WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",transition:"animationend"};return a.transitionEndEventName=o(r),a.animationEndEventName=o(l),a}]),angular.module("ui.bootstrap.modal",["ui.bootstrap.transition"]).factory("$$stackedMap",function(){return{createNew:function(){var n=[];return{add:function(e,t){n.push({key:e,value:t})},get:function(e){for(var t=0;t<n.length;t++)if(e==n[t].key)return n[t]},keys:function(){for(var e=[],t=0;t<n.length;t++)e.push(n[t].key);return e},top:function(){return n[n.length-1]},remove:function(e){for(var t=-1,o=0;o<n.length;o++)if(e==n[o].key){t=o;break}return n.splice(t,1)[0]},removeTop:function(){return n.splice(n.length-1,1)[0]},length:function(){return n.length}}}}}).directive("modalBackdrop",["$timeout",function(n){return{restrict:"EA",replace:!0,templateUrl:"template/modal/backdrop.html",link:function(e){e.animate=!1,n(function(){e.animate=!0})}}}]).directive("modalWindow",["$modalStack","$timeout",function(n,e){return{restrict:"EA",scope:{index:"@",animate:"="},replace:!0,transclude:!0,templateUrl:"template/modal/window.html",link:function(t,o,a){t.windowClass=a.windowClass||"",e(function(){t.animate=!0,o[0].focus()}),t.close=function(e){var t=n.getTop();t&&t.value.backdrop&&"static"!=t.value.backdrop&&e.target===e.currentTarget&&(e.preventDefault(),e.stopPropagation(),n.dismiss(t.key,"backdrop click"))}}}}]).factory("$modalStack",["$transition","$timeout","$document","$compile","$rootScope","$$stackedMap",function(n,e,t,o,a,i){function r(){for(var n=-1,e=p.keys(),t=0;t<e.length;t++)p.get(e[t]).value.backdrop&&(n=t);return n}function l(n){var e=t.find("body").eq(0),o=p.get(n).value;p.remove(n),c(o.modalDomEl,o.modalScope,300,d),e.toggleClass(m,p.length()>0)}function d(){if(s&&-1==r()){var n=u;c(s,u,150,function(){n.$destroy(),n=null}),s=void 0,u=void 0}}function c(t,o,a,i){function r(){r.done||(r.done=!0,t.remove(),i&&i())}o.animate=!1;var l=n.transitionEndEventName;if(l){var d=e(r,a);t.bind(l,function(){e.cancel(d),r(),o.$apply()})}else e(r,0)}var s,u,m="modal-open",p=i.createNew(),f={};return a.$watch(r,function(n){u&&(u.index=n)}),t.bind("keydown",function(n){var e;27===n.which&&(e=p.top(),e&&e.value.keyboard&&a.$apply(function(){f.dismiss(e.key)}))}),f.open=function(n,e){p.add(n,{deferred:e.deferred,modalScope:e.scope,backdrop:e.backdrop,keyboard:e.keyboard});var i=t.find("body").eq(0),l=r();l>=0&&!s&&(u=a.$new(!0),u.index=l,s=o("<div modal-backdrop></div>")(u),i.append(s));var d=angular.element("<div modal-window></div>");d.attr("window-class",e.windowClass),d.attr("index",p.length()-1),d.attr("animate","animate"),d.html(e.content);var c=o(d)(e.scope);p.top().value.modalDomEl=c,i.append(c),i.addClass(m)},f.close=function(n,e){var t=p.get(n).value;t&&(t.deferred.resolve(e),l(n))},f.dismiss=function(n,e){var t=p.get(n).value;t&&(t.deferred.reject(e),l(n))},f.dismissAll=function(n){for(var e=this.getTop();e;)this.dismiss(e.key,n),e=this.getTop()},f.getTop=function(){return p.top()},f}]).provider("$modal",function(){var n={options:{backdrop:!0,keyboard:!0},$get:["$injector","$rootScope","$q","$http","$templateCache","$controller","$modalStack",function(e,t,o,a,i,r,l){function d(n){return n.template?o.when(n.template):a.get(n.templateUrl,{cache:i}).then(function(n){return n.data})}function c(n){var t=[];return angular.forEach(n,function(n){(angular.isFunction(n)||angular.isArray(n))&&t.push(o.when(e.invoke(n)))}),t}var s={};return s.open=function(e){var a=o.defer(),i=o.defer(),s={result:a.promise,opened:i.promise,close:function(n){l.close(s,n)},dismiss:function(n){l.dismiss(s,n)}};if(e=angular.extend({},n.options,e),e.resolve=e.resolve||{},!e.template&&!e.templateUrl)throw new Error("One of template or templateUrl options is required.");var u=o.all([d(e)].concat(c(e.resolve)));return u.then(function(n){var o=(e.scope||t).$new();o.$close=s.close,o.$dismiss=s.dismiss;var i,d={},c=1;e.controller&&(d.$scope=o,d.$modalInstance=s,angular.forEach(e.resolve,function(e,t){d[t]=n[c++]}),i=r(e.controller,d)),l.open(s,{scope:o,deferred:a,content:n[0],backdrop:e.backdrop,keyboard:e.keyboard,windowClass:e.windowClass})},function(n){a.reject(n)}),u.then(function(){i.resolve(!0)},function(){i.reject(!1)}),s},s}]};return n}),angular.module("template/modal/backdrop.html",[]).run(["$templateCache",function(n){n.put("template/modal/backdrop.html",'<div class="modal-backdrop fade" ng-class="{in: animate}" ng-style="{\'z-index\': 1040 + index*10}"></div>')}]),angular.module("template/modal/window.html",[]).run(["$templateCache",function(n){n.put("template/modal/window.html",'<div tabindex="-1" class="modal fade {{ windowClass }}" ng-class="{in: animate}" ng-style="{\'z-index\': 1050 + index*10, display: \'block\'}" ng-click="close($event)">\n    <div class="modal-dialog"><div class="modal-content" ng-transclude></div></div>\n</div>')}]);